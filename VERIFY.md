# GitHub Pages é€‚é…éªŒè¯æŒ‡å—

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•éªŒè¯é¡¹ç›®æ˜¯å¦å·²æ­£ç¡®é€‚é… GitHub Pagesã€‚

## âœ… å¿«é€Ÿæ£€æŸ¥æ¸…å•

### 1. é…ç½®æ–‡ä»¶æ£€æŸ¥

è¿è¡Œè‡ªåŠ¨æ£€æŸ¥è„šæœ¬ï¼š
```bash
node check-github-pages.js
```

æˆ–è€…æ‰‹åŠ¨æ£€æŸ¥ä»¥ä¸‹é¡¹ç›®ï¼š

- [x] âœ… `vite.config.ts` åŒ…å« `base` é…ç½®
- [x] âœ… `src/main.tsx` ä¸­ `BrowserRouter` æœ‰ `basename` å±æ€§
- [x] âœ… `public/.nojekyll` æ–‡ä»¶å­˜åœ¨
- [x] âœ… `package.json` åŒ…å« `deploy` è„šæœ¬
- [x] âœ… `gh-pages` ä¾èµ–å·²å®‰è£…

## ğŸ” è¯¦ç»†éªŒè¯æ­¥éª¤

### æ­¥éª¤ 1: æ„å»ºæµ‹è¯•ï¼ˆé»˜è®¤é…ç½®ï¼Œæ ¹ç›®å½•éƒ¨ç½²ï¼‰

```bash
# æ¸…ç†ä¹‹å‰çš„æ„å»º
rm -rf dist

# æ„å»ºé¡¹ç›®
npm run build
```

**éªŒè¯ç‚¹ï¼š**
- âœ… æ„å»ºæˆåŠŸï¼Œæ²¡æœ‰é”™è¯¯
- âœ… `dist` ç›®å½•ç”Ÿæˆ
- âœ… `dist/index.html` å­˜åœ¨
- âœ… èµ„æºæ–‡ä»¶è·¯å¾„ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼ˆä»¥ `/` å¼€å¤´ï¼‰

**æ£€æŸ¥æ„å»ºäº§ç‰©ï¼š**
```bash
cat dist/index.html | grep -E "(src=|href=)"
```

åº”è¯¥çœ‹åˆ°ç±»ä¼¼ï¼š
```html
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<script type="module" crossorigin src="/assets/index-xxx.js"></script>
<link rel="stylesheet" crossorigin href="/assets/index-xxx.css">
```

### æ­¥éª¤ 2: æœ¬åœ°é¢„è§ˆæµ‹è¯•

```bash
# å¯åŠ¨é¢„è§ˆæœåŠ¡å™¨ï¼ˆé»˜è®¤ç«¯å£ 4173ï¼‰
npm run preview
```

**éªŒè¯ç‚¹ï¼š**
1. è®¿é—® `http://localhost:4173`
2. âœ… é¡µé¢æ­£å¸¸åŠ è½½
3. âœ… æ‰€æœ‰æ ·å¼å’Œèµ„æºåŠ è½½æ­£å¸¸
4. âœ… è·¯ç”±è·³è½¬æ­£å¸¸å·¥ä½œï¼ˆæµ‹è¯•å„ä¸ªé¡µé¢ï¼‰
5. âœ… åˆ·æ–°é¡µé¢ä¸ä¼š 404

**æµ‹è¯•è·¯ç”±ï¼š**
- é¦–é¡µ: `http://localhost:4173/`
- MIC é¡µé¢: `http://localhost:4173/mic`
- AMP é¡µé¢: `http://localhost:4173/amp`
- ä¸‹è½½é¡µé¢: `http://localhost:4173/downloads`
- è”ç³»é¡µé¢: `http://localhost:4173/contact`

### æ­¥éª¤ 3: å­ç›®å½•éƒ¨ç½²æµ‹è¯•ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ è¦éƒ¨ç½²åˆ°å­ç›®å½•ï¼ˆå¦‚ `username.github.io/my_web/`ï¼‰ï¼š

```bash
# æ¸…ç†ä¹‹å‰çš„æ„å»º
rm -rf dist

# ä½¿ç”¨å­ç›®å½• base path æ„å»º
VITE_BASE_PATH=/my_web/ npm run build

# æ£€æŸ¥æ„å»ºäº§ç‰©ä¸­çš„è·¯å¾„
cat dist/index.html | grep -E "(src=|href=)"
```

**éªŒè¯ç‚¹ï¼š**
- âœ… èµ„æºè·¯å¾„åº”è¯¥åŒ…å« base pathï¼ˆå¦‚ `/my_web/assets/...`ï¼‰
- âœ… é¢„è§ˆæ—¶è®¿é—® `http://localhost:4173/my_web/` æ­£å¸¸

```bash
# ä½¿ç”¨å­ç›®å½•è·¯å¾„é¢„è§ˆ
npm run preview
# è®¿é—® http://localhost:4173/my_web/
```

### æ­¥éª¤ 4: æ£€æŸ¥å…³é”®æ–‡ä»¶å†…å®¹

#### æ£€æŸ¥ vite.config.ts
```bash
cat vite.config.ts | grep -A 5 "base"
```

åº”è¯¥çœ‹åˆ°ï¼š
```typescript
const base = env.VITE_BASE_PATH || "/";
return {
    base,
    // ...
}
```

#### æ£€æŸ¥ main.tsx
```bash
cat src/main.tsx | grep -A 2 "basename"
```

åº”è¯¥çœ‹åˆ°ï¼š
```typescript
const basename = import.meta.env.BASE_URL || "/";
<BrowserRouter basename={basename}>
```

#### æ£€æŸ¥ .nojekyll
```bash
ls -la public/.nojekyll
```

åº”è¯¥å­˜åœ¨è¯¥æ–‡ä»¶ã€‚

### æ­¥éª¤ 5: å®é™…éƒ¨ç½²æµ‹è¯•

```bash
# æ„å»ºå¹¶éƒ¨ç½²
npm run deploy
```

**éƒ¨ç½²åéªŒè¯ï¼š**
1. ç­‰å¾…å‡ åˆ†é’Ÿè®© GitHub Pages ç”Ÿæ•ˆ
2. è®¿é—®ä½ çš„ GitHub Pages URL
3. âœ… é¡µé¢æ­£å¸¸åŠ è½½
4. âœ… æ‰€æœ‰è·¯ç”±æ­£å¸¸å·¥ä½œ
5. âœ… åˆ·æ–°é¡µé¢ä¸ä¼š 404
6. âœ… æµè§ˆå™¨æ§åˆ¶å°æ²¡æœ‰è·¯å¾„ç›¸å…³çš„é”™è¯¯

## ğŸš¨ å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1: æ„å»ºåèµ„æºè·¯å¾„é”™è¯¯

**ç—‡çŠ¶ï¼š** é¡µé¢ç©ºç™½ï¼Œæ§åˆ¶å°æ˜¾ç¤º 404 é”™è¯¯

**æ£€æŸ¥ï¼š**
```bash
# æŸ¥çœ‹æ„å»ºåçš„ index.html
cat dist/index.html
```

**è§£å†³ï¼š**
- ç¡®è®¤ `vite.config.ts` ä¸­çš„ `base` é…ç½®æ­£ç¡®
- å¦‚æœéƒ¨ç½²åˆ°å­ç›®å½•ï¼Œç¡®ä¿è®¾ç½®äº† `VITE_BASE_PATH`

### é—®é¢˜ 2: è·¯ç”±åˆ·æ–°å 404

**ç—‡çŠ¶ï¼š** ç›´æ¥è®¿é—®è·¯ç”±ï¼ˆå¦‚ `/mic`ï¼‰è¿”å› 404

**æ£€æŸ¥ï¼š**
```bash
# ç¡®è®¤ BrowserRouter æœ‰ basename
grep "basename" src/main.tsx
```

**è§£å†³ï¼š**
- ç¡®è®¤ `src/main.tsx` ä¸­ `BrowserRouter` æœ‰ `basename` å±æ€§
- ç¡®ä¿ `basename` å€¼ä¸ `vite.config.ts` ä¸­çš„ `base` ä¸€è‡´

### é—®é¢˜ 3: é™æ€èµ„æºåŠ è½½å¤±è´¥

**ç—‡çŠ¶ï¼š** å›¾ç‰‡ã€å­—ä½“ç­‰é™æ€èµ„æºæ— æ³•åŠ è½½

**æ£€æŸ¥ï¼š**
- ç¡®è®¤ `public` ç›®å½•ä¸­çš„æ–‡ä»¶ä¼šåœ¨æ„å»ºæ—¶å¤åˆ¶åˆ° `dist`
- æ£€æŸ¥èµ„æºè·¯å¾„æ˜¯å¦ä½¿ç”¨äº†ç»å¯¹è·¯å¾„ï¼ˆä» `/` å¼€å§‹ï¼‰

### é—®é¢˜ 4: éƒ¨ç½²åæ ·å¼ä¸¢å¤±

**ç—‡çŠ¶ï¼š** éƒ¨ç½²åé¡µé¢æ²¡æœ‰æ ·å¼

**å¯èƒ½åŸå› ï¼š**
- `.nojekyll` æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå¯¼è‡´ Jekyll å¤„ç†äº†æŸäº›æ–‡ä»¶
- CSS æ–‡ä»¶è·¯å¾„é”™è¯¯

**è§£å†³ï¼š**
```bash
# ç¡®è®¤ .nojekyll å­˜åœ¨
ls public/.nojekyll
```

## ğŸ“‹ éªŒè¯æ¸…å•æ€»ç»“

åœ¨éƒ¨ç½²å‰ï¼Œç¡®è®¤ä»¥ä¸‹æ‰€æœ‰é¡¹ï¼š

- [ ] âœ… è¿è¡Œ `node check-github-pages.js` å…¨éƒ¨é€šè¿‡
- [ ] âœ… `npm run build` æ„å»ºæˆåŠŸ
- [ ] âœ… `npm run preview` æœ¬åœ°é¢„è§ˆæ­£å¸¸
- [ ] âœ… æ‰€æœ‰è·¯ç”±é¡µé¢éƒ½èƒ½è®¿é—®
- [ ] âœ… åˆ·æ–°é¡µé¢ä¸ä¼š 404
- [ ] âœ… æµè§ˆå™¨æ§åˆ¶å°æ²¡æœ‰é”™è¯¯
- [ ] âœ… å¦‚æœéƒ¨ç½²åˆ°å­ç›®å½•ï¼Œå·²è®¾ç½®æ­£ç¡®çš„ `VITE_BASE_PATH`

## ğŸ¯ éªŒè¯é€šè¿‡çš„æ ‡å‡†

é¡¹ç›®å·²æ­£ç¡®é€‚é… GitHub Pages å¦‚æœï¼š

1. âœ… è‡ªåŠ¨æ£€æŸ¥è„šæœ¬å…¨éƒ¨é€šè¿‡
2. âœ… æ„å»ºæˆåŠŸæ— é”™è¯¯
3. âœ… æœ¬åœ°é¢„è§ˆæ‰€æœ‰åŠŸèƒ½æ­£å¸¸
4. âœ… è·¯ç”±å’Œèµ„æºåŠ è½½æ­£ç¡®
5. âœ… éƒ¨ç½²åˆ° GitHub Pages åæ­£å¸¸å·¥ä½œ

---

**æç¤ºï¼š** å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥è¿è¡Œ `node check-github-pages.js` æŸ¥çœ‹è¯¦ç»†æ£€æŸ¥ç»“æœã€‚

